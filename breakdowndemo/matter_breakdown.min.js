(function(h){function p(a){return new Promise(function(m,c){var e=document.createElement("script");e.src=a;e.type="text/javascript";e.onload=function(){console.log("Breakdown: loaded script",a);m()};document.getElementsByTagName("head")[0].appendChild(e)})}function q(){function a(d){var a=d.height(),f=d.width();if(0==f||0==a)throw Error("Error creating physRect: width or height cannot be zero");var c=d.offset().top,e=d.offset().left+f/2;c+=a/2;this.$element=d.clone();this.$element.addClass("breakdown-element").css({top:-a/
    2+"px",left:-f/2+"px",width:f+"px",height:a+"px"}).attr("draggable",!1).appendTo(h);d.css({visibility:"hidden"});this.matterRect=Matter.Bodies.rectangle(e,c,f,a);Matter.World.add(k.world,this.matterRect);Matter.Events.on(k,"afterUpdate",function(b){this.matterRect.position.y>l.height&&Matter.Body.setPosition(this.matterRect,{x:l.width/2,y:l.height/2});b=this.matterRect.position;this.$element[0].style.transform="translate("+b.x+"px, "+b.y+"px) rotate("+this.matterRect.angle+"rad)"}.bind(this))}function m(){l.needsUpdate&&
    l.update();Matter.Engine.update(k,1E3/60);requestAnimationFrame(m)}$(window);var c=$(document.body),e=[],k=Matter.Engine.create({enableSleeping:!0}),l=new function(a){this.width=a.width();this.height=a.height();this.wallThickness=100;this.calcWall=function(a){switch(a){case 0:return{x:this.width/2,y:-this.wallThickness/2,width:2*this.width,height:this.wallThickness};case 1:return{x:this.width+this.wallThickness/2,y:this.height/2,width:this.wallThickness,height:2*this.height};case 2:return{x:this.width/
    2,y:this.height+this.wallThickness/2,width:2*this.width,height:this.wallThickness};case 3:return{x:-this.wallThickness/2,y:this.height/2,width:this.wallThickness,height:2*this.height}}}.bind(this);this.walls=[];for(var c=0;4>c;c++){var f=this.calcWall(c);this.walls.push(Matter.Bodies.rectangle(f.x,f.y,f.width,f.height,{isStatic:!0}))}Matter.World.add(k.world,this.walls);this.update=function(){l.needsUpdate=!1;for(var c=[],b=0;4>b;b++)c.push(this.calcWall(b));this.width=a.width();this.height=a.height();
    for(b=0;4>b;b++){var d=this.calcWall(b);Matter.Sleeping.set(this.walls[b],!1);Matter.Body.setPosition(this.walls[b],{x:d.x,y:d.y});d.width>d.height?Matter.Body.scale(this.walls[b],c[b].width/this.width,1):Matter.Body.scale(this.walls[b],1,c[b].height/this.height)}for(b=0;b<e.length;b++)e[b]&&Matter.Sleeping.set(e[b].matterRect,!1)}.bind(this);var d;window.addEventListener("resize",function(a){clearTimeout(d);d=setTimeout(function(){this.needsUpdate=!0},500)}.bind(this),!0);document.addEventListener("visibilitychange",
    function(){document.hidden||this.update()}.bind(this))}(c),h=$("<div>",{id:"breakdown_container",html:""});h.appendTo(c);c.css({position:"relative"});var g=$("span, a, p, img, h1, h2, h3, h4, h5, li, th, td, dt, dd, button, input, cite").not(function(){return"fixed"==$(this).css("position")?!0:!1}).not(function(){return 0<$(this).find("span, a, p, img, h1, h2, h3, h4, h5, li, th, td, dt, dd, button, input, cite").length?!0:!1});500<g.length&&(console.warn("Breakdown: target array length limited to ",
    500," (",g.length,")"),g.slice(500).css("opacity","0.7"),g=g.slice(0,500));for(var n=0;n<g.length;n++)try{e.push(new a(g.eq(n)))}catch(d){console.warn(d.message)}g.filter(function(){return"inline"==$(this).css("display")?!0:!1}).addClass("inlineFix");$("<style>").prop("type","text/css").html("\n                body{\n                    position: relative;\n                }\n                #breakdown_container {\n                    position: absolute;\n                    z-index: 99;\n                    top: 0;\n                    left: 0;\n                    right: 0;\n                    bottom: 0;\n                    overflow: hidden;\n                }\n                #breakdown_container .breakdown-element {\n                    position: absolute;\n                    top: 0;\n                    left: 0;\n                    transform-origin: center;\n                    background-color: rgba(128,128,128,0.1);\n                    transition: none;\n                    user-select: none;\n                    user-drag: none;\n                    pointer-events: none;\n                }\n                #breakdown_container .breakdown-element.inlineFix {\n                    display:inline-block;\n                }\n            ").appendTo("head");
    $("title").text("Breakdown! "+$("title").text());c=Matter.Mouse.create(c[0]);c=Matter.MouseConstraint.create(k,{mouse:c,constraint:{stiffness:.2}});Matter.World.add(k.world,c);requestAnimationFrame(m)}h.start=function(){if(h.ALREADY_RUNNING)console.warn("Breakdown: can't start, instance already running!");else{h.ALREADY_RUNNING=!0;var a=[];if("undefined"===typeof jQuery||"3.2.1">jQuery.fn.jquery)console.log("Breakdown: jQuery 3.2.1 or greater not present, loading jQ"),a.push(p("https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"));
    "undefined"===typeof Matter&&(console.log("Breakdown: Matter phys engine not present, loading Matter"),a.push(p("https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.14.2/matter.min.js")));a.length?Promise.all(a).then(q):q()}}})(window.Breakdown=window.Breakdown||{});